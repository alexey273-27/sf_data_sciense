<center> <img src = https://raw.githubusercontent.com/AndreyRysistov/DatasetsForPandas/main/hh%20label.jpg alt="drawing" style="width:400px;">

# <center> Проект 1: Анализ резюме из HeadHunter

#### Python 3.9.13
# Огловление

[1. **Описание проекта**](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Описание-проекта)

[2. **Алгоритм анализа:**](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Алгоритм_анализа:)

[2.1 Исследование структуры данных](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#1._Исследование-структуры-данных)

[2.2 Преобразование данных](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#2._Преобразование-данных)

[2.3 Исследование зависимостей в данных](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#3._Исследование-зависимостей-в-данных)

[2.4 Очистка данных](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#4._Очистка-данных)

[3. **Недостатки метода:**](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Недостатки-метода:)

[4. **Модификация метода:**](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Модификация-метода:)

[5. **Использованные инструменты и библиотеки**](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Использованные-инструменты-и-библиотеки:)


## Описание проекта
Нам необходимо иследовать структуру данных, затем преобразовать данные, иследовать зависемости в данных и в итоге очистить данные от пустых значений, выбросов и дубликатов
## Алгоритм анализа:
### 1. Исследование структуры данных 
Здесь мы иучаем данные целостность количество строк столбцов есть ли пропуски количество уникальных значений и неинформативные данные
### 2. Преобразование данных
Здесь мы преобразуем данные: если они как бы слиплись в одном признаке  разделяем на разные признаки, удоляем неинформативные признаки, распределяем данные на более распространенные категори итд.
### 3. Исследование зависимостей в данных
Здесь при помоши графиков определяем зависемости данных отклонения выбросы не коректные данные итд.
### 4 Очистка данных
Здесь мы ишем пропуски в данных либо удаляем либо сами заполняем данными(среднее значение, мода, медиана итд.). Удоляем дублирующие данные, неинформативные данные, выбросы, явно ложные данные итд. 

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)


###  1. Исследование структуры данных

1. Прочитаем данные с помощью библиотеки Pandas   
2. Выведим несколько первых (последних) строк таблицы чтобы убедиться в том, что ваши данные не повреждены  
3. Выведем основную информацию о числе непустых значений в столбцах и их типах в таблице.
Видно что таблица **hh_database** имеет 44744 строки и  12 столбцов типа   
**dtypes: object(12)** и занимает в памяти memory usage: **4.1+ MB**   
4. Так же из таблицы видно что в трех столбцах есть пропуски    
* Опыт работы                        44576  
* Последнее/нынешнее место работы    44743  
* Последняя/нынешняя должность       44742

5. Расматривая основную статистическую информацию о столбцах.
из таблицы видно что очень много уникальных значений которые можно разделить и преобразовать 

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)
### 2. Преобразование данных
1. Создадим с помощью функции-преобразования новый признак **"Образование"**, который должен иметь 4 категории: **"высшее"**, **"неоконченное высшее"**, **"среднее специальное"** и **"среднее"**. Для этого напишем функцию level_education и подставим в метод ***apply***
Удалим признак **"Образование и ВУЗ"**.

2. Преобразуем столбец **Пол и Возраст** в два новых столбца **"Пол"** и **"Возраст"** где Пол будет "М" или "Ж" , а возраст в целых числах годов используем метод ***apply*** для этого.
также удалим столбец **Пол и Возраст**

3. Преобразуем  столбец **"Опыт работы"** в **"Опыт работы (месяц)"** по средствам функции **trans_month** которая переводит количество годов и месяцов в месяца и удалим столбец **"Опыт работы"**

4. Преобразуем  столбец **"Город, переезд, командировки"** в три столбца **"Город"**, **"Готовность к переезду"**, **"Готовность к командировкам"** в столбце **"Город"** должен содержать только 4 категории: ***"Москва"***, ***"Санкт-Петербург"***, ***"город-миллионник"*** (их список ниже), остальные обозначаются как ***"другие"***. Cтолбцы **"Готовность к переезду"**, **"Готовность к командировкам"** имеют значение ***'True', 'False'***  
список городов миллионников:**['Новосибирск', 'Екатеринбург','Нижний Новгород','Казань', 'Челябинск','Омск', 'Самара', 'Ростов-на-Дону', 'Уфа', 'Красноярск', 'Пермь', 'Воронеж','Волгоград']**  
Напишем функцию **sity_r** которая будет сортировать из какого города соискатель и методом apply создадим столбец **"Город"** также создадим столбцы **"Готовность к переезду"**, **"Готовность к командировкам"** методом ***apply***

5. Рассмотрим признаки **"Занятость"** и **"График"** они предстовляют собой набор категорий   
желаемой занятости (**полная занятость**, **частичная занятость**, **проектная работа**, **волонтерство**, **стажировка**) и   
желаемого графика работы (**полный день**, **сменный график**, **гибкий график**, **удаленная работа**, **вахтовый метод**).   
Cоискатель может указывать различные комбинации данных категорий, по этому создадим признаки-мигалки для каждой категории: если категория присутствует в списке желаемых соискателем, то в столбце на месте строки рассматриваемого соискателя ставится ***True***, иначе - ***False***.
Для этого найдем вхождение каждой котегории в признаках.

6. В признаке желаемой зароботной платы (**ЗП**) соискатели вырожали свои желания **ЗП** в разных валютах поэтому приведем **ЗП** к одной (***руб***)и назовем ее **ЗП (руб)** по этому для начала напишем функцию которая приводит неаименование валют к стандартному виду в **ISO** кодировке. За дату обменного курса возмем дату составления резюме которую приведем к виду **ГГГГ-ММ-ДД**. Скачаем  таблицу ExchangeRates.csv в которой находятся выгрузка курсов валют, которые встречаются в наших данных за период с 29.12.2017 по 05.12.2019.   
Нам потребуются столбцы:
* "currency" - наименование валюты в ISO кодировке,
* "date" - дата, 
* "proportion" - пропорция, 
* "close" - цена закрытия (последний зафиксированный курс валюты на указанный день).
остальные удалим а столбец "date" переведем к виду **ГГГГ-ММ-ДД**  
Обьеденим нашу таблицу с таблицей курсов, вычеслим ЗП в рублях по формуле : Умножить сумму желаемой заработной платы на присоединенный курс валюты (close) и разделить на пропорцию, результат занести в новый столбец **"ЗП (руб)"**   
Удалим из нашей таблице лишние столбцы **'ЗП', 'сумма', 'валюта','currency','proportion', 'close', 'date'**




:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)
### 3. Исследование зависимостей в данных

Построим распределение признака **"Возраст"**
![Alt text](images\newplot.png)  
Из графиков видно:
1. мода признака Возраст = 30 годам
2. 50 % соискателей это люди возрастом от 27 до 36 лет, остальные распределились от 14 лет до 27 и от 36 до 49 по 25 %  соответственно 
3. минимальное значение возраста 14 лет максимальное значение 100 лет
4. соискателей свыше 49 лет не много и это потонциальные выбросы. 
5. Самый большой возраст это 100 лет что скорее всего это выброс, да и люди возрастом выше 65 уже пенсионеры.

Построим распределение признака **"Опыт работы (месяц)"**
![Alt text](images\newplot1.png)   
Из графиков видно :
1. Мода опыта работы равна 81 месяц 
2. Опыт работы у соискателей начинается от одного месяца и заканчивается 1188 месяцев
3. У большенства соискателей опыт работы находится в интервале от 1 до 299 месяцев
4. Выроженной анамалией явлдяется опыт работы 1188 месяцев (99)лет хотя возраст его 48 лет что не может быть

Построим распределение признака **"ЗП (руб)"**
![Alt text](images\newplot2.png)  
Из графика видно:
1. Мода признака ЗП(руб) равна 50 тыс руб
2. Минимальная значение ЗП равна 1 рубль а максимальное значение 24304876 руб
3. У большенства соискателей желаемая ЗП находится в интервале от 1 рубля до 181 тысячи руб
4. ЗП свыше 1 милиона руб скарей всего являются анамалиями

Построим диаграмму, которая показывает зависимость **медианной** желаемой заработной платы (**"ЗП (руб)"**) от уровня образования (**"Образование"**).
![Alt text](images\image.png)   
Из графика видно:
1. Наибольший уровнь желаемой заработной платы у соискателей с вышим образованием
2. Наименьший уровнь желаемой заработной платы у соискателей со средним и средне специальным образованием
3. Признак уровня образования важен так как соискатели с разным уровнем образования имеют разные уровни желаемой ЗП

Построим диаграмму, которая показывает распределение желаемой заработной платы (**"ЗП (руб)"**) в зависимости от города (**"Город"**).
![Alt text](images\newplot3.png)  
Из графиков видно:
1. В Москве желаемая З.П. выше и ноходится от 60 до 150 тыс руб а медианная З.П. 85 тыс руб
2. Минимальные требования желаемой З.П. в городах миллионниках и других городах от 30 до 60 тыс руб медианная З.П. 40 тыс руб
3. Признак города важен в прогназировании З.П.

Построим **многоуровневую столбчатую диаграмму**, которая показывает зависимость медианной заработной платы (**"ЗП (руб)"**) от признаков **"Готовность к переезду"** и **"Готовность к командировкам"**.
![Alt text](images\image-1.png)  
Из графика видно:
1. медианная желаемая заработная плата выше у готовых к переезду и к командировкам 
2. медианная желаемая заработная плата выше у готовых к командировкам но не готовых переезжать к готовым переехать но неготовых к командировкам

Построим сводную таблицу, иллюстрирующую зависимость **медианной** желаемой заработной платы от возраста (**"Возраст"**) и образования (**"Образование"**). На полученной сводной таблице построим **тепловую карту**.
![Alt text](images\image-2.png)  
Из графика видно:
1. максимальная медианная желаемая заработная плата у людей от 35 до 47 лет с высшем образованнием свыше 100 000 руб
2. у людей с неоконченым высшем образованием медианная желаемая  заработная плата в раёне от 60 000 до 100 000 руб
3. у людей со средним и средне специальным образованием медианная  желаемая заработная плата до 60 000 руб
4. у людей возростом от 35 до 50 лет повышеные требования к зароботной плате 

Построим **диаграмму рассеяния**, показывающую зависимость опыта работы (**"Опыт работы (месяц)"**) от возраста (**"Возраст"**).
![Alt text](images\newplot4.png)   
Из граика видно:  
1. Несколько (7) человек указало что их опыт работы больше их возраста
2. Средне различие опыта работы и возраста от 16 лет и и больше
3. Соискатели начинаются возрастом от 15 лет

Построим сводную таблицу, иллюстрирующую зависимость **медианной** желаемой заработной платы от занятости . На полученной сводной таблице построим **тепловую карту**.
![Alt text](images\image-3.png)   
Из графика видно:
1. Что медианная желалаемая ЗП в работающих полный рабочий день  выше 
2. Что медианная желалаемая ЗП в работающих полный рабочий день или частично также высока нежели просто частичная занятость
3. Что медианная желалаемая ЗП в работающих над проектами и волонтерством тоже высока 
4. Средняя медианная желалаемая ЗП находится в пределах 50 тыс руб 

Построим сводную таблицу, иллюстрирующую зависимость **медианной** желаемой заработной платы от графика работы . На полученной сводной таблице построим **тепловую карту**.
![Alt text](images\image-4.png)  
Из  графика видно:
1. Полный день, удаленная работа, гибкий график и вахтовый метод является самыми высокими требованиями к ЗП более 80 тыс руб 
2. У людей со сменный графиком работы требования к ЗП ниже 

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)
### 4. Очистка данных

1. Начнем с дубликатов в наших данных. Найдем **полные дубликаты** в таблице с резюме и удалим их. с помощью функции ***drop_duplicates***
2. Выведите информацию **о числе пропусков** в столбцах. 
* Опыт работы(месяц)                 168 пропусков
* Последняя/нынешняя должность         2 пропусков
* Последнее/нынешнее место работы      1 пропусков
3. У нас есть пропуски в 3ех столбцах: **"Опыт работы (месяц)"**, **"Последнее/нынешнее место работы"**, **"Последняя/нынешняя должность"**. Поступим следующим образом: удалите строки, где есть пропуск в столбцах с местом работы и должностью. Пропуски в столбце с опытом работы заполните **медианным** значением.
4. Удалим резюме, в которых указана заработная плата либо выше 1 млн. рублей, либо ниже 1 тыс. рублей. 
5. В процессе разведывательного анализа мы обнаружили резюме, в которых **опыт работы в годах превышал возраст соискателя**. Найдите такие резюме и удалите их из данных
6. В результате анализа мы обнаружили потенциальные выбросы в признаке **"Возраст"**. Это оказались резюме людей чересчур преклонного возраста для поиска работы. Построим распределение признака в **логарифмическом масштабе**. Добавим к графику линии, отображающие **среднее и границы интервала метода трех сигм**. Напомним, сделать это можно с помощью метода axvline. Например, для построение линии среднего будет иметь вид:

`histplot.axvline(log_age.mean(), color='k', lw=2)`

вычеслим  асимметрично логарифмического распределения
Найдем выбросы с помощью метода z-отклонения и удалите их из данных, используя логарифмический масштаб. делаем послабление на **1 сигму** (возьмите 4 сигмы) в **правую сторону**.
![Alt text](images\image-5.png)   
Выведем таблицу с полученными выбросами и оценим, с каким возрастом соискатели попадают под категорию выбросов?  
![Alt text](images\Screenshot_1.png)  
Из графика видно, что асиметрия правасторонняя так как As больше 0.  
Из таблицы видно, что люди возрастом 100 лет и 15 поподают в категорию выбросов  
:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)

## Недостатки метода:

1. Не всегда можно понять что данные ложные а матиматическими методами они не выевляются 
2. Заполнение пропусков не всегда может быть коректно
3. Удаление дубликатов не всегда может быть коректно

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)
## Модификация метода:

1. Можно попробовать воспользоваться несколькими методами преобразования данных, 
2. Также можно добавить вариативности количеству квартильных размахов в левую и правую сторону распределений.

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)
## Использованные инструменты и библиотеки

* pandas 2.0.2
* numpy 1.24.3
* matplotlib  3.7.1
* seaborn 0.12.2
* plotly.express 5.15.0

:arrow_up:[к оглавлению](https://github.com/alexey273-27/sf_data_sciense/blob/master/PROJECT-1.%20%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D1%80%D0%B5%D0%B7%D1%8E%D0%BC%D0%B5%20%D0%B8%D0%B7%20HeadHunter/README.md#Огловление)



